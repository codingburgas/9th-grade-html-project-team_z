<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Служители - Пожарна Безопасност</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <header>
        <div class="header-content">
            <h1 class="logo"><i class="fa-solid fa-fire-extinguisher"></i> Пожарна Безопасност</h1>
            <nav class="main-nav">
                <ul>
                    <li><a href="index.html" data-section="home"><i class="fa-solid fa-house"></i> Начало</a></li>
                    <li><a href="employees.html" class="active" data-section="employees"><i class="fa-solid fa-users"></i> Служители</a></li>
                    <li><a href="vehicles.html" data-section="vehicles"><i class="fa-solid fa-truck-fire"></i> Автомобили</a></li>
                    <li><a href="report-incident.html" data-section="report-incident"><i class="fa-solid fa-triangle-exclamation"></i> Докладвай</a></li>
                    <li><a href="incidents.html" data-section="incidents"><i class="fa-solid fa-list-check"></i> Произшествия</a></li>
                    <li><a href="statistics.html" data-section="statistics"><i class="fa-solid fa-chart-line"></i> Статистика</a></li>
                    <li><a href="map.html" data-section="map-section"><i class="fa-solid fa-map-location-dot"></i> Карта</a></li>
                    <li><a href="messages.html" data-section="messages"><i class="fa-solid fa-envelope"></i> Съобщения</a></li>
                </ul>
            </nav>
            <button id="theme-toggle" class="icon-button"><i class="fa-solid fa-moon"></i></button>
        </div>
    </header>
    <main class="content-area">
        <section id="employees" class="active">
            <div class="section-header">
                <h2><i class="fa-solid fa-users"></i> Управление на служители</h2>
                <div class="section-actions">

                </div>
            </div>
            <div class="filters-and-search">
                <input type="text" id="employee-search" placeholder="Търси по име, екип, статус...">
                <select id="employee-status-filter">
                    <option value="all">Всички статуси</option>
                    <option value="available">Свободен</option>
                    <option value="in-incident">В произшествие</option>
                    <option value="on-leave">В отпуск</option>
                </select>
            </div>
            <div class="table-container">
                <table id="employees-table">
                    <thead>
                        <tr>
                            <th>Име</th>
                            <th>Фамилия</th>
                            <th>ЕГН</th>
                            <th>Екип</th>
                            <th>Статус</th>
                            <th>Действия</th>
                        </tr>
                    </thead>
                    <tbody>
                        </tbody>
                </table>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 Информационна система за Пожарна Безопасност</p>
    </footer>
    <script src="script.js"></script>
    <script>
        // Specific script for employees.html
        document.addEventListener('DOMContentLoaded', () => {
            // Dummy data (can be global or fetched)
            let employees = [
                { id: 1, firstName: 'Иван', lastName: 'Петров', EGN: '8012051234', team: 'Alpha', status: 'available' },
                { id: 2, firstName: 'Мария', lastName: 'Георгиева', EGN: '9203105678', team: 'Beta', status: 'in-incident' },
                { id: 3, firstName: 'Георги', lastName: 'Иванов', EGN: '7507159876', team: 'Alpha', status: 'available' },
                { id: 4, firstName: 'Елена', lastName: 'Димитрова', EGN: '8801201122', team: 'Gamma', status: 'on-leave' },
                { id: 5, firstName: 'Петър', lastName: 'Колев', EGN: '9504253344', team: 'Beta', status: 'available' },
                { id: 6, firstName: 'Николай', lastName: 'Стоянов', EGN: '8309015566', team: 'Gamma', status: 'in-incident' },
            ];

            const populateEmployeesTable = (data) => {
                const tableBody = document.querySelector('#employees-table tbody');
                if (!tableBody) return;
                tableBody.innerHTML = '';

                data.forEach(emp => {
                    const row = tableBody.insertRow();
                    row.insertCell().textContent = emp.firstName;
                    row.insertCell().textContent = emp.lastName;
                    row.insertCell().textContent = emp.EGN;
                    row.insertCell().textContent = emp.team;
                    row.insertCell().textContent = emp.status === 'available' ? 'Свободен' : (emp.status === 'in-incident' ? 'В произшествие' : 'В отпуск');
                    
                    const actionsCell = row.insertCell();
                    actionsCell.classList.add('table-actions');
                    actionsCell.innerHTML = `
                        <button class="btn btn-icon edit" data-id="${emp.id}"><i class="fa-solid fa-pencil"></i></button>
                        <button class="btn btn-icon delete" data-id="${emp.id}"><i class="fa-solid fa-trash-can"></i></button>
                    `;
                });
            };
            populateEmployeesTable(employees);

            // Add Employee/Manage Teams buttons (dummy functionality)
            document.getElementById('add-employee-btn')?.addEventListener('click', () => alert('Отвори форма за добавяне на служител.'));
            document.getElementById('manage-teams-btn')?.addEventListener('click', () => alert('Отвори прозорец за управление на екипи.'));

            // Filter/Search functionality (simplified)
            const employeeSearch = document.getElementById('employee-search');
            const employeeStatusFilter = document.getElementById('employee-status-filter');

            const filterEmployees = () => {
                let filtered = employees;
                const searchTerm = employeeSearch.value.toLowerCase();
                const statusFilter = employeeStatusFilter.value;

                if (searchTerm) {
                    filtered = filtered.filter(emp =>
                        emp.firstName.toLowerCase().includes(searchTerm) ||
                        emp.lastName.toLowerCase().includes(searchTerm) ||
                        emp.team.toLowerCase().includes(searchTerm) ||
                        emp.status.toLowerCase().includes(searchTerm)
                    );
                }

                if (statusFilter !== 'all') {
                    filtered = filtered.filter(emp => emp.status === statusFilter);
                }
                populateEmployeesTable(filtered);
            };

            employeeSearch?.addEventListener('input', filterEmployees);
            employeeStatusFilter?.addEventListener('change', filterEmployees);
        });
    </script>
</body>
</html>